{"ast":null,"code":"import _objectSpread from\"/Users/bengallagher/Desktop/projects/ecommerce-store/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/bengallagher/Desktop/projects/ecommerce-store/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import{Link}from\"react-router-dom\";import{pluralize}from\"../../utils/helpers\";import{useStoreContext}from'../../utils/GlobalState';import{ADD_TO_CART,UPDATE_CART_QUANTITY}from'../../utils/actions';function ProductItem(item){var _useStoreContext=useStoreContext(),_useStoreContext2=_slicedToArray(_useStoreContext,2),state=_useStoreContext2[0],dispatch=_useStoreContext2[1];var cart=state.cart;var addToCart=function addToCart(){// find the cart item with the matching id\nvar itemInCart=cart.find(function(cartItem){return cartItem._id===_id;});// if there was a match, call UPDATE with a new purchase quantity\nif(itemInCart){dispatch({type:UPDATE_CART_QUANTITY,_id:_id,purchaseQuantity:parseInt(itemInCart.purchaseQuantity)+1});}else{dispatch({type:ADD_TO_CART,product:_objectSpread(_objectSpread({},item),{},{purchaseQuantity:1})});}};var image=item.image,name=item.name,_id=item._id,price=item.price,quantity=item.quantity;return/*#__PURE__*/React.createElement(\"div\",{className:\"card px-1 py-1\"},/*#__PURE__*/React.createElement(Link,{to:\"/products/\".concat(_id)},/*#__PURE__*/React.createElement(\"img\",{alt:name,src:\"/images/\".concat(image)}),/*#__PURE__*/React.createElement(\"p\",null,name)),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",null,quantity,\" \",pluralize(\"item\",quantity),\" in stock\"),/*#__PURE__*/React.createElement(\"span\",null,\"$\",price)),/*#__PURE__*/React.createElement(\"button\",{onClick:addToCart},\"Add to cart\"));}export default ProductItem;","map":{"version":3,"sources":["/Users/bengallagher/Desktop/projects/ecommerce-store/client/src/components/ProductItem/index.js"],"names":["React","Link","pluralize","useStoreContext","ADD_TO_CART","UPDATE_CART_QUANTITY","ProductItem","item","state","dispatch","cart","addToCart","itemInCart","find","cartItem","_id","type","purchaseQuantity","parseInt","product","image","name","price","quantity"],"mappings":"mWAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,SAAT,KAA0B,qBAA1B,CACA,OAASC,eAAT,KAAgC,yBAAhC,CACA,OAASC,WAAT,CAAsBC,oBAAtB,KAAkD,qBAAlD,CAEA,QAASC,CAAAA,WAAT,CAAqBC,IAArB,CAA2B,CAEzB,qBAA0BJ,eAAe,EAAzC,sDAAOK,KAAP,sBAAcC,QAAd,sBAEA,GAAQC,CAAAA,IAAR,CAAiBF,KAAjB,CAAQE,IAAR,CAEF,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACtB;AACA,GAAMC,CAAAA,UAAU,CAAGF,IAAI,CAACG,IAAL,CAAU,SAACC,QAAD,QAAcA,CAAAA,QAAQ,CAACC,GAAT,GAAiBA,GAA/B,EAAV,CAAnB,CAEA;AACA,GAAIH,UAAJ,CAAgB,CACdH,QAAQ,CAAC,CACPO,IAAI,CAAEX,oBADC,CAEPU,GAAG,CAAEA,GAFE,CAGPE,gBAAgB,CAAEC,QAAQ,CAACN,UAAU,CAACK,gBAAZ,CAAR,CAAwC,CAHnD,CAAD,CAAR,CAKD,CAND,IAMO,CACLR,QAAQ,CAAC,CACPO,IAAI,CAAEZ,WADC,CAEPe,OAAO,gCAAOZ,IAAP,MAAaU,gBAAgB,CAAE,CAA/B,EAFA,CAAD,CAAR,CAID,CACF,CAjBD,CAmBE,GACEG,CAAAA,KADF,CAMIb,IANJ,CACEa,KADF,CAEEC,IAFF,CAMId,IANJ,CAEEc,IAFF,CAGEN,GAHF,CAMIR,IANJ,CAGEQ,GAHF,CAIEO,KAJF,CAMIf,IANJ,CAIEe,KAJF,CAKEC,QALF,CAMIhB,IANJ,CAKEgB,QALF,CAQA,mBACE,2BAAK,SAAS,CAAC,gBAAf,eACE,oBAAC,IAAD,EAAM,EAAE,qBAAeR,GAAf,CAAR,eACE,2BACE,GAAG,CAAEM,IADP,CAEE,GAAG,mBAAaD,KAAb,CAFL,EADF,cAKE,6BAAIC,IAAJ,CALF,CADF,cAQE,4CACE,+BAAME,QAAN,KAAiBrB,SAAS,CAAC,MAAD,CAASqB,QAAT,CAA1B,aADF,cAEE,oCAAQD,KAAR,CAFF,CARF,cAYE,8BAAQ,OAAO,CAAEX,SAAjB,gBAZF,CADF,CAgBD,CAED,cAAeL,CAAAA,WAAf","sourcesContent":["import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { pluralize } from \"../../utils/helpers\";\nimport { useStoreContext } from '../../utils/GlobalState';\nimport { ADD_TO_CART, UPDATE_CART_QUANTITY } from '../../utils/actions';\n\nfunction ProductItem(item) {\n\n  const [state, dispatch] = useStoreContext();\n\n  const { cart } = state;\n\nconst addToCart = () => {\n  // find the cart item with the matching id\n  const itemInCart = cart.find((cartItem) => cartItem._id === _id);\n\n  // if there was a match, call UPDATE with a new purchase quantity\n  if (itemInCart) {\n    dispatch({\n      type: UPDATE_CART_QUANTITY,\n      _id: _id,\n      purchaseQuantity: parseInt(itemInCart.purchaseQuantity) + 1\n    });\n  } else {\n    dispatch({\n      type: ADD_TO_CART,\n      product: { ...item, purchaseQuantity: 1 }\n    });\n  }\n};\n\n  const {\n    image,\n    name,\n    _id,\n    price,\n    quantity\n  } = item;\n\n  return (\n    <div className=\"card px-1 py-1\">\n      <Link to={`/products/${_id}`}>\n        <img\n          alt={name}\n          src={`/images/${image}`}\n        />\n        <p>{name}</p>\n      </Link>\n      <div>\n        <div>{quantity} {pluralize(\"item\", quantity)} in stock</div>\n        <span>${price}</span>\n      </div>\n      <button onClick={addToCart}>Add to cart</button>\n    </div>\n  );\n}\n\nexport default ProductItem;\n"]},"metadata":{},"sourceType":"module"}